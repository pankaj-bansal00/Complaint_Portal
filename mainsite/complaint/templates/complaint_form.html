<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/complaint/complaintform.css">
        <title>Complaint Form</title>
    </head>
    <body>
    
        <h2>Submit a Complaint</h2>

        <form method="POST" action="{% url 'complaint_form' %}">
            {% csrf_token %}
        
            <label>Name:</label>
            <input type="text" value="{{ user.name }}" readonly>
        
            <label>Phone Number:</label>
            <input type="text" value="{{ user.phone }}" readonly>
        
            <label>Customer Type:</label>
            <select name="customer_type" required>
                <option value="existing">Existing Customer</option>
                <option value="new">New Customer</option>
            </select>
  
        
            <label>Account Number:</label>
            <div style="display: flex; align-items: center;">
                <input type="password" id="account_number" name="account_number" required 
                       style="flex: 1; width: 540px; height: 48.8px;" 
                       maxlength="16" oninput="validateAccountNumber(this)">
                <button type="button" onclick="toggleVisibility()" 
                        style="margin-left: 5px; background: none; border: none; cursor: pointer;">
                    üëÅÔ∏è
                </button>
            </div>
            <p id="error_message" style="color: red; display: none;">Account number must be exactly 16 digits.</p>
            

                <label for="branch">Select Branch</label >
                <select id="branch" name="branch" required>
                    <option value="" disabled selected>Select Branch Name</option>
                    <option value="Head Office">Head Office (0001)</option>
                    <option value="Ding">Ding (0002)</option>
                    <option value="Rania">Rania (0003)</option>
                    <option value="Amritsar Nawan">Amritsar Nawan (0004)</option>
                    <option value="Madhosingania">Madhosingania (0005)</option>
                    <option value="Aboobshahar">Aboobshahar (0006)</option>
                    <option value="City Branch Sirsa">City Branch Sirsa (0007)</option>
                    <option value="Bansudhar">Bansudhar (0008)</option>
                    <option value="Baragurah">Baragurah (0009)</option>
                    <option value="Barnala Road">Barnala Road (0010)</option>
                    <option value="Bani">Bani (0011)</option>
                    <option value="Bijjuwali">Bijjuwali (0012)</option>
                    <option value="Chotala Branch">Chotala Branch (0013)</option>
                    <option value="Damdama">Damdama (0016)</option>
                    <option value="Desujodha">Desujodha (0017)</option>
                    <option value="Dharampura">Dharampura (0018)</option>
                    <option value="Ellenabad">Ellenabad (0019)</option>
                    <option value="Goriwala">Goriwala (0020)</option>
                    <option value="Jamal Branch">Jamal Branch (0021)</option>
                    <option value="Kagdana">Kagdana (0022)</option>
                    <option value="Kalanwali">Kalanwali (0023)</option>
                    <option value="Keharwala">Keharwala (0024)</option>
                    <option value="Kharia">Kharia (0025)</option>
                    <option value="Khokhar">Khokhar (0026)</option>
                    <option value="Kurganwali">Kurganwali (0027)</option>

                </select>
        
                <label for="debitCard">Debit Card Number</label>
                <input type="text" id="debitCard" name="debitCard" maxlength="14" oninput="formatDebitCard(this)" required>
                <p id="error_message" style="color: red; display: none;">Debit card number must be exactly 12 digits.</p>
                
                <label for="category">Category of Complaints</label>
                <select id="category" name="category" required>
                    <option>NEFT/RTGS</option>
                    <option>Other</option>
                </select>
        
            <label>Complaint Type:</label>
            <select name="complaint_type" required>
                <option value="transaction">Transaction Issue</option>
                <option value="account">Account Problem</option>
                <option value="service">Service Complaint</option>
                <option value="fraud">Fraud Report</option>
                <option value="other">Other</option>
            </select>
        
            <label>Complaint Title:</label>
            <input type="text" name="complaint_title" required>
        
            <label>Complaint Description (Max 500 words):</label>
            <textarea name="complaint_description" rows="5" maxlength="500" required></textarea>
        
            <button type="submit">Submit Complaint</button>
        </form>
        
        <footer>
            <p>¬© 2025 CMS Management | <a href="https://coopbksirsa.com/" target="_blank">THE SIRSA CENTRAL COOPERATIVE BANK LIMITED</a></p>
        </footer>

        <script>
              function formatDebitCard(input) {
        let value = input.value.replace(/\D/g, ''); // Remove non-numeric characters
        value = value.substring(0, 12); // Limit to 12 digits

        let formattedValue = value.replace(/(\d{4})(?=\d)/g, '$1-'); // Add dash after every 4 digits

        input.value = formattedValue; // Set formatted value

        // Show error message if length is not exactly 12 digits
        let errorMessage = document.getElementById("error_message");
        if (value.length !== 12) {
            errorMessage.style.display = "block";
        } else {
            errorMessage.style.display = "none";
        }
    }
            function toggleVisibility() {
    var input = document.getElementById("account_number");
    if (input.type === "password") {
        input.type = "text";
    } else {
        input.type = "password";
    }
}
function toggleVisibility() {
        var input = document.getElementById("account_number");
        if (input.type === "password") {
            input.type = "text";
        } else {
            input.type = "password";
        }
    }

    function validateAccountNumber(input) {
        var errorMessage = document.getElementById("error_message");

        // Remove non-numeric characters
        input.value = input.value.replace(/\D/g, '');

        // Show error if length is not exactly 16
        if (input.value.length !== 16) {
            errorMessage.style.display = "block";
        } else {
            errorMessage.style.display = "none";
        }
    }
        </script>
        
    </body>
    </html>